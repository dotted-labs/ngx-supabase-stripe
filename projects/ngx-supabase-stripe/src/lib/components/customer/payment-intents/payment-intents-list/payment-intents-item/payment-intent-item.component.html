<div class="card bg-base-100 shadow-sm hover:shadow-md transition-shadow duration-200 card-hover">
  <div class="card-body p-4">
    <div class="flex justify-between">
      <div>
        <h3 class="card-title text-lg">
          <span class="badge {{ getStatusBadgeClass(paymentIntent().status) }} status-badge ml-2">
            {{ paymentIntent().status }}
          </span>
        </h3>
        <p class="text-gray-600 text-sm">
          Cliente: {{ paymentIntent().customer }}
        </p>
      </div>
      
      <div class="flex gap-2">
        <button class="btn btn-sm btn-ghost" (click)="toggleExpand()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
          {{ isExpanded() ? 'Ocultar' : 'Detalles' }}
        </button>
      </div>
    </div>

    <div class="payment-intent-details mt-2">
      <div class="flex justify-between text-sm">
        <div>
          <span class="font-medium">Método: </span>
          <span class="badge badge-outline">
            {{ paymentIntent().paymentMethodType }}
          </span>
        </div>
        <div>
          <span class="font-medium">Modo: </span>
          <span class="text-md">
            {{ paymentIntent().liveMode ? 'Live' : 'Test' }}
          </span>
        </div>
      </div>
    </div>

    <!-- Expanded Details -->
    @if (isExpanded()) {
      <div class="payment-expanded mt-4 border-t pt-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <h4 class="text-md font-semibold mb-2">Detalles del Pago</h4>
            <ul class="space-y-1 text-sm">
              <li><span class="font-medium">ID Completo:</span> {{ paymentIntent().id }}</li>
              <li><span class="font-medium">Método de pago:</span> {{ paymentIntent().paymentMethodType }}</li>
              <li><span class="font-medium">Método de confirmación:</span> {{ paymentIntent().confirmationMethod }}</li>
              @if (paymentIntent().invoiceId) {
                <li><span class="font-medium">ID de factura:</span> {{ paymentIntent().invoiceId }}</li>
              }
            </ul>
          </div>
          
          <div>
            <h4 class="text-md font-semibold mb-2">Estado</h4>
            <ul class="space-y-1 text-sm">
              <li>
                <span class="font-medium">Estado: </span> 
                <span class="badge {{ getStatusBadgeClass(paymentIntent().status) }} status-badge">
                  {{ paymentIntent().status }}
                </span>
              </li>
              <li><span class="font-medium">Modo: </span> {{ paymentIntent().liveMode ? 'Producción' : 'Pruebas' }}</li>
            </ul>
          </div>
        </div>
      </div>
    }
  </div>
</div> 